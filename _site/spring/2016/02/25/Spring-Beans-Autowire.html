<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="http://localhost:4000/assets/images/favicon.png">

    <title>Spring Beans Autowire</title>
    <meta name="description"
          content="This is quick note after learning Spring autowire.">

    <link rel="canonical" href="http://localhost:4000/spring/2016/02/25/Spring-Beans-Autowire.html">
    <link rel="alternate" type="application/rss+xml" title="I am Beili !" href="http://localhost:4000/feed.xml">

    <script type="text/javascript" src="http://localhost:4000/bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Third-Party CSS -->
    <link rel="stylesheet" href="http://localhost:4000/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://localhost:4000/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="http://localhost:4000/bower_components/hover/css/hover-min.css">
    <link rel="stylesheet" href="http://localhost:4000/bower_components/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/syntax.css">

    <!-- My CSS -->
    <link rel="stylesheet" href="http://localhost:4000/assets/css/common.css">

    <!-- CSS set in page -->
    

    <!-- CSS set in layout -->
    
    <link rel="stylesheet" href="http://localhost:4000/assets/css/sidebar-post-nav.css">
    

    <script type="text/javascript" src="http://localhost:4000/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</head>


    <body>

    <header class="site-header">
    <div class="container">
        <a id="site-header-brand" href="/" title="Beili">
            <span class="octicon octicon-mark-github"></span> Beili
        </a>
        <nav class="site-header-nav" role="navigation">
            
            <a href="/daicoolb/"
               class=" site-header-nav-item hvr-underline-from-center"
               target=""
               title="Home">
                Home
            </a>
            
            <a href="/daicoolb/open-source"
               class=" site-header-nav-item hvr-underline-from-center"
               target=""
               title="Open-Source">
                Open-Source
            </a>
            
            <a href="/daicoolb/blog"
               class=" site-header-nav-item hvr-underline-from-center"
               target=""
               title="Blog">
                Blog
            </a>
            
            <a href="/daicoolb/bookmark"
               class=" site-header-nav-item hvr-underline-from-center"
               target=""
               title="Bookmark">
                Bookmark
            </a>
            
            <a href="/daicoolb/about"
               class=" site-header-nav-item hvr-underline-from-center"
               target=""
               title="About">
                About
            </a>
            
        </nav>
    </div>
</header>


        <div class="content">
            <link rel="stylesheet" href="http://localhost:4000/assets/css/sidebar-post-nav.css" />
<section class="jumbotron geopattern" data-pattern-id="Spring Beans Autowire">
    <div class="container">
        <div id="jumbotron-meta-info">
            <h1>Spring Beans Autowire</h1>
            <span class="meta-info">
                
                
                <span class="octicon octicon-calendar"></span> 2016/02/25
                
            </span>
        </div>
    </div>
</section>
<script>
    $(document).ready(function(){

        $('.geopattern').each(function(){
            $(this).geopattern($(this).data('pattern-id'));
        });

    });
</script>
<article class="post container" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="row">

        
        <div class="col-md-8 markdown-body">

            <p>This is quick note after learning Spring autowire.</p>

<h2 id="autowire">Autowire</h2>

<p>Instead of using <code>&lt;constructor-arg&gt;</code> and <code>&lt;property&gt;</code> elements in XML configuration file to declare relationships between beans. We could using <strong>autowire</strong> which <strong>helps cut down on the amount of XML configuration</strong> for a big Spring based application. But for many large applications, it is also discouraged to use autowiring because <strong>it removes the transparency and the structure from collaborating classes</strong>.</p>

<p>There are mainly four types:</p>

<ul>
  <li>byName</li>
  <li>byType</li>
  <li>construtor</li>
  <li>autodetect</li>
</ul>

<h3 id="byname">byName</h3>

<p><strong>Autowiring by property name</strong>. Spring container looks at the properties of the beans on which autowire attribute is set to byName in the XML configuration file. It then tries to match and wire its properties with the beans defined by the same names in the configuration file.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 
    <span class="c1">// Autowire by name 'testBean', so the bean id should be testBean. </span>
    <span class="c1">// But in fact, it searches by setter name setTestBean() removing 'set' </span>
    <span class="c1">// prefix and lowercase the first character, so 'testBean'</span>
      
    <span class="c1">// Getter and setter</span>
<span class="o">}</span></code></pre></figure>

<p>Then in XML configuration, spring container finds a bean with id <code>testBean</code>.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"byName"</span><span class="nt">/&gt;</span></code></pre></figure>

<p>We could in the mean time <strong>using <code>&lt;propery ref='xxx' ...</code> to override the value from autowiring by name</strong>.</p>

<h3 id="bytype">byType</h3>

<p><strong>Autowiring by property datatype</strong>. Spring container looks at the properties of the beans on which autowire attribute is set to byType in the XML configuration file. It then tries to match and wire a property if its type matches with exactly one of the beans name in configuration file. <strong>If more than one such beans exists, a fatal exception is thrown.</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 
    <span class="c1">// Autowire by type, so spring container searches type 'TestBean'. </span>
    <span class="c1">// But in fact, it searches in setTestBean(TestBean testBean) to </span>
    <span class="c1">// find 'TestBean' datatype.</span>
      
    <span class="c1">// Getter and setter</span>
<span class="o">}</span></code></pre></figure>

<p>Then in XML configuration, spring container finds a bean with type <code>TestBean</code>.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"byType"</span><span class="nt">/&gt;</span>  </code></pre></figure>

<p>We could in the mean time <strong>using <code>&lt;propery ref='xxx' ...</code> to override the value from autowiring by type</strong>.</p>

<h3 id="construtor">construtor</h3>

<p><strong>Similar as byType, but type applies to constructor arguments</strong>. If there is not exactly one bean of the constructor argument type in the container, a fatal error is raised.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 

    <span class="kd">public</span> <span class="nf">Test</span><span class="o">(</span><span class="n">TestBean</span> <span class="n">testBean</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// do stuff</span>
    <span class="o">}</span> 
    <span class="c1">// Autowire by constructor, so spring container searches type 'TestBean' in constructor</span>

    <span class="c1">// Getter and setter</span>
<span class="o">}</span></code></pre></figure>

<p>Then in XML configuration, spring container finds a bean with id <code>testBean</code>.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span></code></pre></figure>

<p>Unlike byType and byName using <code>&lt;propery ref='xxx' ...</code> to override, <code>&lt;constructor-args ..&gt;</code> can not mix with autowire</p>

<h3 id="autodetect">autodetect</h3>

<p>Spring automatically detects which type to use. <strong>It firstly tries to autowire by constructor, if it does not work, Spring tries to autowire by byType.</strong></p>

<h2 id="autowire-mixed-with-ref">autowire mixed with ref</h2>

<p><strong>If <code>autowire</code> mixed with <code>ref</code>, <code>ref</code> will override <code>autowire</code></strong></p>

<h2 id="default-autowire">default-autowire</h2>

<p>We could use <code>default-autowire</code> on <code>&lt;beans&gt;&lt;/beans&gt;</code> instead of repeating autowire type setting on each bean:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> </code></pre></figure>

<p>For the beans including in <code>&lt;beans&gt;&lt;/beans&gt;</code> , we could ovrride it by setting autowire type explicitly:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> 

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span>

	// Other beans

<span class="nt">&lt;/beans&gt;</span></code></pre></figure>

<h2 id="autowire-candidate">autowire-candidate</h2>

<p>We could use <code>autowire-candidate</code> to <strong>exclude a bean from autowiring</strong>. By default, all the beans have <code>autowire-candidate</code> with true value implicitly. So we need to set it to false to exclude this bean.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> 

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>
	<span class="c">&lt;!-- Set autowire-candidate to false, so it will never be considered for autowiring--&gt;</span>
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBadBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span> <span class="na">autowire-candidate=</span><span class="s">"false"</span><span class="nt">/&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span>

	// Other beans

<span class="nt">&lt;/beans&gt;</span></code></pre></figure>

<h2 id="ref">Ref</h2>

<p><a href="http://www.tutorialspoint.com/spring/spring_beans_autowiring.htm">Tutorialspoint - Autowiring</a>
<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-autowire">Spring Reference</a>
<a href="https://examples.javacodegeeks.com/enterprise-java/spring/beans-spring/spring-autowire-example/">Javacodegeeks - spring-autowire-example</a></p>



            <!-- Comments -->
            
<div class="comments">
    <div id="disqus_thread"></div>
    <script>
        /**
         * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
         */
        /*
         var disqus_config = function () {
         this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
         this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
         };
         */
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//httpdongchuangithubio.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


        </div>

        <div class="col-md-4">
            <h3>Post Directory</h3>
<div id="post-directory-module">
<section class="post-directory">
    <!-- Links that trigger the jumping -->
    <!-- Added by javascript below -->
    <dl></dl>
</section>
</div>

<script type="text/javascript">

    $(document).ready(function(){
        $( "article h2" ).each(function( index ) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" hre=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3")

            children.each(function( index ) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" hre=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        var fixmeTop = $('#post-directory-module').offset().top - 100;       // get initial position of the element

        $(window).scroll(function() {                  // assign scroll event listener

            var currentScroll = $(window).scrollTop(); // get current position

            if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                $('#post-directory-module').css({      // scroll to that element or below it
                    top: '100px',
                    position: 'fixed',
                    width: 'inherit'
                });
            } else {                                   // apply position: static
                $('#post-directory-module').css({      // if you scroll above it
                    position: 'inherit',
                    width: 'inherit'
                });
            }

        });

        $("a.jumper").on("click", function( e ) {

            e.preventDefault();

            $("body, html").animate({
                scrollTop: ($( $(this).attr('hre') ).offset().top - 100)
            }, 600);

        });
    });

</script>
        </div>
        

    </div>

</article>

        </div>

    <footer class="container">

    <div class="site-footer">

        <div class="copyright pull-left">
            <!-- 请不要更改这一行 方便其他人知道模板的来源 谢谢 -->
            <!-- Please keep this line to let others know where this theme comes from. Thank you :D -->
            Power by <a href="https://github.com/DONGChuan/Yummy-Jekyll">Yummy Jekyll</a>
        </div>

        <a href="https://github.com/daicoolb" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>

        <div class="pull-right">
            <a href="javascript:window.scrollTo(0,0)" >TOP</a>
        </div>

    </div>

    <!-- Third-Party JS -->
    <script type="text/javascript" src="http://localhost:4000/bower_components/geopattern/js/geopattern.min.js"></script>

    <!-- My JS -->
    <script type="text/javascript" src="http://localhost:4000/assets/js/script.js"></script>

    

    
    <!-- Google Analytics -->
    <div style="display:none">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-72165600-1', 'auto');
            ga('send', 'pageview');

        </script>
    </div>
    

</footer>


    </body>

</html>
